{"ast":null,"code":"import React,{useState}from\"react\";import\"./style.scss\";import{ReactMic}from\"react-mic\";import{Button,ProgressBar}from\"react-bootstrap\";import{FaMicrophoneAlt}from\"react-icons/fa\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";let SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition||window.speechSynthesis;let mic=new SpeechRecognition();mic.continuous=true;mic.interimResults=true;mic.lang=\"en-US\";mic.crossBrowser=true;const SpeechToText=()=>{const[transcript,setTranscript]=useState(\"\");const[timerSeconds,setTimerSeconds]=React.useState(40);const[recordedSeconds,setRecordedSeconds]=React.useState(40);const[timerSecondsForprogress,setTimerSecondsForprogress]=React.useState(100);// Audio recorder States\nconst[audioRecorder,setAudioRecorder]=React.useState(\"\");const[statusAction,setActionStatus]=React.useState(\"Recording..\");// Handle blob data\nconst[blobURL,setBlobURL]=React.useState(\"\");const[recordedBlobData,setRecordedBlobData]=React.useState(\"\");const userDetails=JSON.parse(localStorage.getItem(\"userInfo\"));let[pauseArry,setPauseArry]=useState([]);// For Handle timeOut alert modal\nconst[showAlert,setShowAlert]=React.useState(false);const startRecording=()=>{mic.onresult=event=>{const transcript=Array.from(event.results).map(result=>result[0]).map(result=>result.transcript).join(\"\");setTranscript(transcript);console.log(transcript);};mic.start();};const stopRecording=()=>{mic.stop();};const onData=()=>{};const onStop=async recordedBlob=>{let blob=await fetch(recordedBlob.blobURL).then(r=>r.blob());setRecordedBlobData(recordedBlob);// var blobUrl = URL.createObjectURL(blob);\n// var xhr = new XMLHttpRequest();\n// xhr.responseType = \"blob\";\n// xhr.onload = function () {\n//   var recoveredBlob = xhr.response;\n//   var reader = new FileReader();\n//   reader.onload = function () {\n//     var blobAsDataUrl = reader.result;\n//   };\n//   reader.readAsDataURL(recoveredBlob);\n// };\n// xhr.open(\"GET\", blobUrl);\n// xhr.send();\nsetBlobURL(blob);let startTime=recordedBlob.startTime;let stopTime=recordedBlob.stopTime;let dd=(stopTime-startTime)/1000;};return/*#__PURE__*/_jsxs(\"div\",{className:\"button-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:startRecording,children:\"Start Listening\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:stopRecording,children:\"Stop Listening\"}),/*#__PURE__*/_jsx(\"p\",{children:transcript}),/*#__PURE__*/_jsxs(\"div\",{className:\"read-aloud-question\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"answer-main-wrap\",style:userDetails.type===\"custom\"?{height:\"180px\"}:{height:\"150px\"},children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cards-body\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Current Status: \",/*#__PURE__*/_jsxs(\"span\",{children:[\"Answer \",statusAction,\".\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"progrss-bar-mic-pm\",children:userDetails.type===\"custom\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"mic-icon-main\",children:[\" \",/*#__PURE__*/_jsx(FaMicrophoneAlt,{className:\"mic-icon\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"Recorded-Timer\",children:[recordedSeconds>9?recordedSeconds:\"0\"+recordedSeconds,\" \",\"Seconds Recorded.\"]})]}),userDetails.type===\"custom\"&&/*#__PURE__*/_jsx(Button,{className:\"skip-btn\",variant:\"primary\"// onClick={() => handleAnswerAnalysis(\"Next\")}\n,children:/*#__PURE__*/_jsx(\"span\",{children:\"Stop\"})})]})}),userDetails.type===\"custom\"&&timerSecondsForprogress!==0?/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar-pm\",style:{width:\"100%\",background:\"white\",height:\"5px\"},children:/*#__PURE__*/_jsx(\"div\",{style:{width:\"\".concat(timerSecondsForprogress,\"%\"),background:\"#049b40\",height:\"5px\"},className:\"\".concat(timerSecondsForprogress!==100&&\"transintion-time\")})}):\"\",/*#__PURE__*/_jsx(\"div\",{className:\"question-container\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Advertisements are a very powerful medium for any announcement or for any information that reaches the maximum number of people. Types of advertisements are classified and General. Classified advertisements are very much like notices, only the content different and no designs are allowed. It\\u2019s short and to the point. Advertisers only mention the main content, contact, address and telephone number to reach the customer.\"})})]})]});};export default SpeechToText;","map":{"version":3,"names":["React","useState","ReactMic","Button","ProgressBar","FaMicrophoneAlt","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SpeechRecognition","window","webkitSpeechRecognition","speechSynthesis","mic","continuous","interimResults","lang","crossBrowser","SpeechToText","transcript","setTranscript","timerSeconds","setTimerSeconds","recordedSeconds","setRecordedSeconds","timerSecondsForprogress","setTimerSecondsForprogress","audioRecorder","setAudioRecorder","statusAction","setActionStatus","blobURL","setBlobURL","recordedBlobData","setRecordedBlobData","userDetails","JSON","parse","localStorage","getItem","pauseArry","setPauseArry","showAlert","setShowAlert","startRecording","onresult","event","Array","from","results","map","result","join","console","log","start","stopRecording","stop","onData","onStop","recordedBlob","blob","fetch","then","r","startTime","stopTime","dd","className","children","onClick","style","type","height","variant","width","background","concat"],"sources":["/Users/himanshipatel/Documents/react-trans/src/SpeechToText/index.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport \"./style.scss\";\nimport { ReactMic } from \"react-mic\";\nimport { Button, ProgressBar } from \"react-bootstrap\";\nimport { FaMicrophoneAlt } from \"react-icons/fa\";\n\nlet SpeechRecognition =\n  window.SpeechRecognition ||\n  window.webkitSpeechRecognition ||\n  window.speechSynthesis;\n\nlet mic = new SpeechRecognition();\n\nmic.continuous = true;\nmic.interimResults = true;\nmic.lang = \"en-US\";\nmic.crossBrowser = true;\n\nconst SpeechToText = () => {\n  const [transcript, setTranscript] = useState(\"\");\n  const [timerSeconds, setTimerSeconds] = React.useState(40);\n  const [recordedSeconds, setRecordedSeconds] = React.useState(40);\n  const [timerSecondsForprogress, setTimerSecondsForprogress] =\n    React.useState(100);\n\n  // Audio recorder States\n  const [audioRecorder, setAudioRecorder] = React.useState(\"\");\n  const [statusAction, setActionStatus] = React.useState(\"Recording..\");\n\n  // Handle blob data\n  const [blobURL, setBlobURL] = React.useState(\"\");\n  const [recordedBlobData, setRecordedBlobData] = React.useState(\"\");\n  const userDetails = JSON.parse(localStorage.getItem(\"userInfo\"));\n\n  let [pauseArry, setPauseArry] = useState([]);\n  // For Handle timeOut alert modal\n  const [showAlert, setShowAlert] = React.useState(false);\n\n  const startRecording = () => {\n    mic.onresult = (event) => {\n      const transcript = Array.from(event.results)\n        .map((result) => result[0])\n        .map((result) => result.transcript)\n        .join(\"\");\n      setTranscript(transcript);\n      console.log(transcript);\n    };\n    mic.start();\n  };\n  const stopRecording = () => {\n    mic.stop();\n  };\n  const onData = () => {};\n  const onStop = async (recordedBlob) => {\n    let blob = await fetch(recordedBlob.blobURL).then((r) => r.blob());\n\n    setRecordedBlobData(recordedBlob);\n    // var blobUrl = URL.createObjectURL(blob);\n\n    // var xhr = new XMLHttpRequest();\n    // xhr.responseType = \"blob\";\n\n    // xhr.onload = function () {\n    //   var recoveredBlob = xhr.response;\n\n    //   var reader = new FileReader();\n\n    //   reader.onload = function () {\n    //     var blobAsDataUrl = reader.result;\n    //   };\n\n    //   reader.readAsDataURL(recoveredBlob);\n    // };\n\n    // xhr.open(\"GET\", blobUrl);\n    // xhr.send();\n    setBlobURL(blob);\n    let startTime = recordedBlob.startTime;\n    let stopTime = recordedBlob.stopTime;\n    let dd = (stopTime - startTime) / 1000;\n  \n  };\n  return (\n    <div className=\"button-container\">\n      <button className=\"button\" onClick={startRecording}>\n        Start Listening\n      </button>\n      <button className=\"button\" onClick={stopRecording}>\n        Stop Listening\n      </button>\n      <p>{transcript}</p>\n      <div className=\"read-aloud-question\">\n        <div\n          className=\"answer-main-wrap\"\n          style={\n            userDetails.type === \"custom\"\n              ? { height: \"180px\" }\n              : { height: \"150px\" }\n          }\n        >\n          <>\n            <div className=\"cards-body\">\n              <p>\n                Current Status: <span>Answer {statusAction}.</span>\n              </p>\n              <div className=\"progrss-bar-mic-pm\">\n                {userDetails.type === \"custom\" && (\n                  <div className=\"mic-icon-main\">\n                    {\" \"}\n                    <FaMicrophoneAlt className=\"mic-icon\" />\n                  </div>\n                )}\n\n                {/* <ProgressBar className=\"Progress-bar\" now={audioRecorder} /> */}\n              </div>\n              <div className=\"Recorded-Timer\">\n                {recordedSeconds > 9 ? recordedSeconds : \"0\" + recordedSeconds}{\" \"}\n                Seconds Recorded.\n              </div>\n            </div>\n\n          \n            {userDetails.type === \"custom\" && (\n              <Button\n                className=\"skip-btn\"\n                variant=\"primary\"\n                // onClick={() => handleAnswerAnalysis(\"Next\")}\n              >\n                <span>Stop</span>\n              </Button>\n            )}\n          </>\n        </div>\n        {userDetails.type === \"custom\" && timerSecondsForprogress !== 0 ? (\n          <div\n            className=\"progress-bar-pm\"\n            style={{ width: \"100%\", background: \"white\", height: \"5px\" }}\n          >\n            <div\n              style={{\n                width: `${timerSecondsForprogress}%`,\n                background: \"#049b40\",\n                height: \"5px\",\n              }}\n              className={`${\n                timerSecondsForprogress !== 100 && \"transintion-time\"\n              }`}\n            ></div>\n          </div>\n        ) : (\n          \"\"\n        )}\n\n        <div className=\"question-container\">\n          <h3>\n            Advertisements are a very powerful medium for any announcement or\n            for any information that reaches the maximum number of people. Types\n            of advertisements are classified and General. Classified\n            advertisements are very much like notices, only the content\n            different and no designs are allowed. Itâ€™s short and to the point.\n            Advertisers only mention the main content, contact, address and\n            telephone number to reach the customer.\n          </h3>\n          {/* { questionsData[selectedQautionIndex]?.questions} */}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SpeechToText;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}